:root {
	--black-square-background: orange;
	--white-square-background: #efefef;
	--target-cell-color: rgba(255,200,0,0.5);
	--promotion-veil-color: rgba(0,0,0,0.5);
	--promotion-color: black;
	--promotion-background-color: white;
	--promotion-hover-background-color: gray;
}

:root.theme-dark {
	--black-square-background: #4A4A4A;
	--white-square-background: #C6AA6A;
	--target-cell-color: rgba(250,206,142,0.5);
	--promotion-veil-color: rgba(255,255,255,0.5);
	--promotion-color: black;
	--promotion-background-color: white;
	--promotion-hover-background-color: gray;
}

:root.theme-dark #board {
	color: black;
}

#board {
	display: grid;
	grid-template-columns: repeat(8, 1fr);
}

#board p {
	width: 10vmin;
	height: 10vmin;
	font-size: 10vmin;
	text-align: center;
	margin: 0;
}

#board p {
	position: relative;
	background-color: var(--white-square-background);
}
#board p:nth-child(-2n+8),
#board p:nth-child(n+8):nth-child(-2n+15),
#board p:nth-child(n+17):nth-child(-2n+24),
#board p:nth-child(n+24):nth-child(-2n+31),
#board p:nth-child(n+33):nth-child(-2n+40),
#board p:nth-child(n+40):nth-child(-2n+47),
#board p:nth-child(n+49):nth-child(-2n+56),
#board p:nth-child(n+56):nth-child(-2n+63)
{
	background-color: var(--black-square-background);
}

/* rank and file indicators */
#board { position: relative; }
#board p:after, #board:after {
	position: absolute;
	font-size: 1rem;
}
#board:not(.reverse) p:nth-child(8):after,
#board:not(.reverse) p:nth-child(16):after,
#board:not(.reverse) p:nth-child(24):after,
#board:not(.reverse) p:nth-child(32):after,
#board:not(.reverse) p:nth-child(40):after,
#board:not(.reverse) p:nth-child(48):after,
#board:not(.reverse) p:nth-child(56):after,
#board:not(.reverse) p:nth-child(64):after,
#board.reverse p:nth-child(1):after,
#board.reverse p:nth-child(9):after,
#board.reverse p:nth-child(17):after,
#board.reverse p:nth-child(25):after,
#board.reverse p:nth-child(33):after,
#board.reverse p:nth-child(41):after,
#board.reverse p:nth-child(49):after,
#board.reverse p:nth-child(57):after
{
	top: 0.5vmin;
	right: 0.5vmin;
}

#board:not(.reverse) p:nth-child(8):after,
#board:not(.reverse) p:nth-child(24):after,
#board:not(.reverse) p:nth-child(40):after,
#board:not(.reverse) p:nth-child(56):after,
#board:not(.reverse) p:nth-child(57):after,
#board:not(.reverse) p:nth-child(59):after,
#board:not(.reverse) p:nth-child(61):after,
#board:not(.reverse) p:nth-child(63):after,
#board.reverse p:nth-child(9):after,
#board.reverse p:nth-child(25):after,
#board.reverse p:nth-child(41):after,
#board.reverse p:nth-child(57):after,
#board.reverse p:nth-child(8):after,
#board.reverse p:nth-child(6):after,
#board.reverse p:nth-child(4):after,
#board.reverse p:nth-child(2):after
{
	color: var(--white-square-background);
}

#board:not(.reverse) p:nth-child(16):after,
#board:not(.reverse) p:nth-child(32):after,
#board:not(.reverse) p:nth-child(48):after,
#board:not(.reverse) p:nth-child(64):after,
#board:not(.reverse) p:nth-child(58):after,
#board:not(.reverse) p:nth-child(60):after,
#board:not(.reverse) p:nth-child(62):after,
#board:not(.reverse) p:nth-child(64):after,
#board:after,
#board.reverse p:nth-child(1):after,
#board.reverse p:nth-child(17):after,
#board.reverse p:nth-child(33):after,
#board.reverse p:nth-child(49):after,
#board.reverse p:nth-child(7):after,
#board.reverse p:nth-child(5):after,
#board.reverse p:nth-child(3):after
{
	color: var(--black-square-background);
}

#board:not(.reverse) p:nth-child(8):after  { content: '8'; }
#board:not(.reverse) p:nth-child(16):after { content: '7'; }
#board:not(.reverse) p:nth-child(24):after { content: '6'; }
#board:not(.reverse) p:nth-child(32):after { content: '5'; }
#board:not(.reverse) p:nth-child(40):after { content: '4'; }
#board:not(.reverse) p:nth-child(48):after { content: '3'; }
#board:not(.reverse) p:nth-child(56):after { content: '2'; }
#board:not(.reverse) p:nth-child(64):after { content: '1'; }
#board.reverse p:nth-child(1):after  { content: '8'; }
#board.reverse p:nth-child(9):after { content: '7'; }
#board.reverse p:nth-child(17):after { content: '6'; }
#board.reverse p:nth-child(25):after { content: '5'; }
#board.reverse p:nth-child(33):after { content: '4'; }
#board.reverse p:nth-child(41):after { content: '3'; }
#board.reverse p:nth-child(49):after { content: '2'; }
#board.reverse p:nth-child(57):after { content: '1'; }

#board:not(.reverse) p:nth-child(57):after { content: 'a'; }
#board:not(.reverse) p:nth-child(58):after { content: 'b'; }
#board:not(.reverse) p:nth-child(59):after { content: 'c'; }
#board:not(.reverse) p:nth-child(60):after { content: 'd'; }
#board:not(.reverse) p:nth-child(61):after { content: 'e'; }
#board:not(.reverse) p:nth-child(62):after { content: 'f'; }
#board:not(.reverse) p:nth-child(63):after { content: 'g'; }
#board:not(.reverse):after { content: 'h'; }
#board.reverse:after { content: 'a'; }
#board.reverse p:nth-child(8):after { content: 'h'; }
#board.reverse p:nth-child(7):after { content: 'g'; }
#board.reverse p:nth-child(6):after { content: 'f'; }
#board.reverse p:nth-child(5):after { content: 'e'; }
#board.reverse p:nth-child(4):after { content: 'd'; }
#board.reverse p:nth-child(3):after { content: 'c'; }
#board.reverse p:nth-child(2):after { content: 'b'; }
#board:after { bottom: 0.5vmin; left: 70.5vmin; z-index: 1; }

#board:not(.reverse) p:nth-child(57):after,
#board:not(.reverse) p:nth-child(58):after,
#board:not(.reverse) p:nth-child(59):after,
#board:not(.reverse) p:nth-child(60):after,
#board:not(.reverse) p:nth-child(61):after,
#board:not(.reverse) p:nth-child(62):after,
#board:not(.reverse) p:nth-child(63):after,
#board.reverse p:nth-child(8):after,
#board.reverse p:nth-child(7):after,
#board.reverse p:nth-child(6):after,
#board.reverse p:nth-child(5):after,
#board.reverse p:nth-child(4):after,
#board.reverse p:nth-child(3):after,
#board.reverse p:nth-child(2):after
{
	bottom: 0.5vmin;
	left: 0.5vmin;
}

/* target */
#board p.target:before {
	content: ' ';
	position: absolute;
	top: 3vmin;
	left: 3vmin;
	width: 4vmin;
	height: 4vmin;
	border-radius: 2vmin;
	background-color: var(--target-cell-color);
}

/* reverse */
#board.reverse p:nth-child(1) { order: 64; }
#board.reverse p:nth-child(2) { order: 63; }
#board.reverse p:nth-child(3) { order: 62; }
#board.reverse p:nth-child(4) { order: 61; }
#board.reverse p:nth-child(5) { order: 60; }
#board.reverse p:nth-child(6) { order: 59; }
#board.reverse p:nth-child(7) { order: 58; }
#board.reverse p:nth-child(8) { order: 57; }
#board.reverse p:nth-child(9) { order: 56; }
#board.reverse p:nth-child(10) { order: 55; }
#board.reverse p:nth-child(11) { order: 54; }
#board.reverse p:nth-child(12) { order: 53; }
#board.reverse p:nth-child(13) { order: 52; }
#board.reverse p:nth-child(14) { order: 51; }
#board.reverse p:nth-child(15) { order: 50; }
#board.reverse p:nth-child(16) { order: 49; }
#board.reverse p:nth-child(17) { order: 48; }
#board.reverse p:nth-child(18) { order: 47; }
#board.reverse p:nth-child(19) { order: 46; }
#board.reverse p:nth-child(20) { order: 45; }
#board.reverse p:nth-child(21) { order: 44; }
#board.reverse p:nth-child(22) { order: 43; }
#board.reverse p:nth-child(23) { order: 42; }
#board.reverse p:nth-child(24) { order: 41; }
#board.reverse p:nth-child(25) { order: 40; }
#board.reverse p:nth-child(26) { order: 39; }
#board.reverse p:nth-child(27) { order: 38; }
#board.reverse p:nth-child(28) { order: 37; }
#board.reverse p:nth-child(29) { order: 36; }
#board.reverse p:nth-child(30) { order: 35; }
#board.reverse p:nth-child(31) { order: 34; }
#board.reverse p:nth-child(32) { order: 33; }
#board.reverse p:nth-child(33) { order: 32; }
#board.reverse p:nth-child(34) { order: 31; }
#board.reverse p:nth-child(35) { order: 30; }
#board.reverse p:nth-child(36) { order: 29; }
#board.reverse p:nth-child(37) { order: 28; }
#board.reverse p:nth-child(38) { order: 27; }
#board.reverse p:nth-child(39) { order: 26; }
#board.reverse p:nth-child(40) { order: 25; }
#board.reverse p:nth-child(41) { order: 24; }
#board.reverse p:nth-child(42) { order: 23; }
#board.reverse p:nth-child(43) { order: 22; }
#board.reverse p:nth-child(44) { order: 21; }
#board.reverse p:nth-child(45) { order: 20; }
#board.reverse p:nth-child(46) { order: 19; }
#board.reverse p:nth-child(47) { order: 18; }
#board.reverse p:nth-child(48) { order: 17; }
#board.reverse p:nth-child(49) { order: 16; }
#board.reverse p:nth-child(50) { order: 15; }
#board.reverse p:nth-child(51) { order: 14; }
#board.reverse p:nth-child(52) { order: 13; }
#board.reverse p:nth-child(53) { order: 12; }
#board.reverse p:nth-child(54) { order: 11; }
#board.reverse p:nth-child(55) { order: 10; }
#board.reverse p:nth-child(56) { order: 9; }
#board.reverse p:nth-child(57) { order: 8; }
#board.reverse p:nth-child(58) { order: 7; }
#board.reverse p:nth-child(59) { order: 6; }
#board.reverse p:nth-child(60) { order: 5; }
#board.reverse p:nth-child(61) { order: 4; }
#board.reverse p:nth-child(62) { order: 3; }
#board.reverse p:nth-child(63) { order: 2; }
#board.reverse p:nth-child(64) { order: 1; }

/* promotion */
#board.promoting .promotion-container {
	visibility: visible;
}
.promotion-container {
	visibility: hidden;
	z-index: 2;
}

.promotion-container,
.promotion-container:before {
	position: absolute;
	width: 100%;
	height: 100%;
}

.promotion-container:before {
	display: block;
	content: ' ';
	filter: blur(3px);
	background-color: var(--promotion-veil-color);
}

.promotion-selection {
	position: absolute;
	display: flex;
	flex-direction: column;
	justify-content: start;
	height: 100%;
}

#board:not(.reverse) .promotion-selection.black,
#board.reverse .promotion-selection.white {
	justify-content: end;
}
#board .promotion-selection.black {
	flex-direction: column-reverse;
}

#board .promotion-selection .promotion-kind {
	background-color: var(--promotion-background-color);
}
#board .promotion-selection .promotion-kind:hover {
	background-color: var(--promotion-hover-background-color);
}
#board .promotion-selection .promotion-kind:after {
	font-size: 10vmin;
	left: 0;
	text-align: center;
	width: 10vmin;
}
#board.reverse .promotion-selection .promotion-kind:after {
	color: var(--promotion-color);
}

#board:not(.reverse) .promotion-selection.file-a, #board.reverse .promotion-selection.file-h { left: 0; }
#board:not(.reverse) .promotion-selection.file-b, #board.reverse .promotion-selection.file-g { left: 10vmin; }
#board:not(.reverse) .promotion-selection.file-c, #board.reverse .promotion-selection.file-f { left: 20vmin; }
#board:not(.reverse) .promotion-selection.file-d, #board.reverse .promotion-selection.file-e { left: 30vmin; }
#board:not(.reverse) .promotion-selection.file-e, #board.reverse .promotion-selection.file-d { left: 40vmin; }
#board:not(.reverse) .promotion-selection.file-f, #board.reverse .promotion-selection.file-c { left: 50vmin; }
#board:not(.reverse) .promotion-selection.file-g, #board.reverse .promotion-selection.file-b { left: 60vmin; }
#board:not(.reverse) .promotion-selection.file-h, #board.reverse .promotion-selection.file-a { left: 70vmin; }

#board .promotion-selection.white .promotion-kind.queen:after    { content: '♕'; }
#board .promotion-selection.white .promotion-kind.rook:after     { content: '♖'; }
#board .promotion-selection.white .promotion-kind.bishop:after   { content: '♗'; }
#board .promotion-selection.white .promotion-kind.knight:after   { content: '♘'; }
#board .promotion-selection.black .promotion-kind.queen:after    { content: '♛'; }
#board .promotion-selection.black .promotion-kind.rook:after     { content: '♜'; }
#board .promotion-selection.black .promotion-kind.bishop:after   { content: '♝'; }
#board .promotion-selection.black .promotion-kind.knight:after   { content: '♞'; }
